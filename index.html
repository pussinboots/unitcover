<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Unitcover by pussinboots</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/pussinboots/unitcover">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/pussinboots/unitcover/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/pussinboots/unitcover/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Unitcover</h1>
          <p>Simple Service to upload junit xml report data and display the reports over time and build.</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/pussinboots">pussinboots</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h1>
<a name="unitcover" class="anchor" href="#unitcover"><span class="octicon octicon-link"></span></a>unitcover</h1>

<p><a href="https://travis-ci.org/pussinboots/unitcover"><img src="https://travis-ci.org/pussinboots/unitcover.svg?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/r/pussinboots/unitcover?branch=master"><img src="https://img.shields.io/coveralls/pussinboots/unitcover.svg" alt="Coverage Status"></a>
<a href="https://david-dm.org/pussinboots/unitcover"><img src="https://david-dm.org/pussinboots/unitcover.png" alt="Dependencies"></a>
<a href="https://unitcover.herokuapp.com/products.html#/builds/pussinboots/unitcover/builds"><img src="http://heroku-badge.heroku.com/?app=unitcover" alt="Heroku"></a>
<a href="https://unitcover.herokuapp.com/#/builds/pussinboots/unitcover/builds"><img src="https://unitcover.herokuapp.com/api/pussinboots/unitcover/badge?ts=10" alt="Unit Tests"></a></p>

<p><a href="https://unitcover.herokuapp.com/#/builds/pussinboots/unitcover/builds"><img src="http://unitcover.herokuapp.com/api/pussinboots/unitcover/testsuites/badge" alt="Unit Tests"></a></p>

<p>Since one or two weeks i search for a service like <a href="https://coveralls.io">coveralls</a> but only for test results and i didn't found something for free and
SonarQube seems to complex for me. So i decided to build one similar to coveralls and that is my motivation. It is in aeryl stage now and implemented in one day so there still a lot of work to do but can be used.</p>

<p>Feel free to fork this repo and hosted it self the heroku instance running is a free one and very limited one web dyno and 10 database connection so please contact me before you want to upload something in the moment. </p>

<p>At the top of the project you see different badges and the badge on the right side is the badge from this unitcover project. Thanks to <a href="http://shields.io/">shields.io</a> they make the creation of image badges so easy like calculate 1 + 1.</p>

<p><strong>It runs on the <a href="https://www.heroku.com/">heroku</a> plattform but with the lowest free scalability setup. So it could take some minutes to restart after it was suspended.</strong></p>

<h2>
<a name="supported-unit-reports" class="anchor" href="#supported-unit-reports"><span class="octicon octicon-link"></span></a>Supported unit reports</h2>

<p>To increase the supported unit reports from different languages you can send me or upload the unit test result xml file into the test/resources folder. </p>

<ul>
<li>karma unit report</li>
</ul><div class="highlight highlight-xml"><pre><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;testsuites&gt;</span>
  <span class="nt">&lt;testsuite</span> <span class="na">name=</span><span class="s">"Opera 12.16.0 (Linux)"</span> <span class="na">package=</span><span class="s">""</span> <span class="na">timestamp=</span><span class="s">"2014-06-18T18:38:51"</span> <span class="na">id=</span><span class="s">"0"</span> <span class="na">hostname=</span><span class="s">"vagrant-VirtualBox"</span> <span class="na">tests=</span><span class="s">"3"</span> <span class="na">errors=</span><span class="s">"0"</span> <span class="na">failures=</span><span class="s">"0"</span> <span class="na">time=</span><span class="s">"10.997"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;properties&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"browser.fullName"</span> <span class="na">value=</span><span class="s">"Opera/9.80 (X11; Linux x86_64) Presto/2.12.388 Version/12.16"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;testcase</span> <span class="na">name=</span><span class="s">"ten test suites are display"</span> <span class="na">time=</span><span class="s">"9.178"</span> <span class="na">classname=</span><span class="s">"Opera 12.16.0 (Linux).UnitCover build with eleven test suites"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;testcase</span> <span class="na">name=</span><span class="s">"the latest ten test suites should be display started with the eleven test suite"</span> <span class="na">time=</span><span class="s">"1.103"</span> <span class="na">classname=</span><span class="s">"Opera 12.16.0 (Linux).UnitCover build with eleven test suites"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;testcase</span> <span class="na">name=</span><span class="s">"should redirect products.html to products.html#/builds"</span> <span class="na">time=</span><span class="s">"0.716"</span> <span class="na">classname=</span><span class="s">"Opera 12.16.0 (Linux).UnitCover"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;system-out&gt;</span><span class="cp">&lt;![CDATA[</span>
<span class="cp">]]&gt;</span><span class="nt">&lt;/system-out&gt;</span>
    <span class="nt">&lt;system-err/&gt;</span>
  <span class="nt">&lt;/testsuite&gt;</span>
  <span class="nt">&lt;testsuite</span> <span class="na">name=</span><span class="s">"Firefox 30.0.0 (Ubuntu)"</span> <span class="na">package=</span><span class="s">""</span> <span class="na">timestamp=</span><span class="s">"2014-06-18T18:38:51"</span> <span class="na">id=</span><span class="s">"0"</span> <span class="na">hostname=</span><span class="s">"vagrant-VirtualBox"</span> <span class="na">tests=</span><span class="s">"3"</span> <span class="na">errors=</span><span class="s">"0"</span> <span class="na">failures=</span><span class="s">"0"</span> <span class="na">time=</span><span class="s">"10.684"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;properties&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"browser.fullName"</span> <span class="na">value=</span><span class="s">"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:30.0) Gecko/20100101 Firefox/30.0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;testcase</span> <span class="na">name=</span><span class="s">"ten test suites are display"</span> <span class="na">time=</span><span class="s">"9.071"</span> <span class="na">classname=</span><span class="s">"Firefox 30.0.0 (Ubuntu).UnitCover build with eleven test suites"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;testcase</span> <span class="na">name=</span><span class="s">"the latest ten test suites should be display started with the eleven test suite"</span> <span class="na">time=</span><span class="s">"1.149"</span> <span class="na">classname=</span><span class="s">"Firefox 30.0.0 (Ubuntu).UnitCover build with eleven test suites"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;testcase</span> <span class="na">name=</span><span class="s">"should redirect products.html to products.html#/builds"</span> <span class="na">time=</span><span class="s">"0.464"</span> <span class="na">classname=</span><span class="s">"Firefox 30.0.0 (Ubuntu).UnitCover"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;system-out&gt;</span><span class="cp">&lt;![CDATA[</span>
<span class="cp">]]&gt;</span><span class="nt">&lt;/system-out&gt;</span>
    <span class="nt">&lt;system-err/&gt;</span>
  <span class="nt">&lt;/testsuite&gt;</span>
<span class="nt">&lt;/testsuites&gt;</span>
</pre></div>

<ul>
<li>sbt unit report</li>
</ul><div class="highlight highlight-xml"><pre><span class="nt">&lt;testsuite</span> <span class="na">hostname=</span><span class="s">"vagrant-VirtualBox"</span> <span class="na">name=</span><span class="s">"integration.ApplicationSpec"</span> <span class="na">tests=</span><span class="s">"7"</span> <span class="na">errors=</span><span class="s">"0"</span> <span class="na">failures=</span><span class="s">"0"</span> <span class="na">skipped=</span><span class="s">"0"</span> <span class="na">time=</span><span class="s">"1.975"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;testcase</span> <span class="na">name=</span><span class="s">"application changed setup will work should::disable db ssl"</span> <span class="na">classname=</span><span class="s">"integration.ApplicationSpec"</span> <span class="na">time=</span><span class="s">"0.066"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/testcase&gt;&lt;testcase</span> <span class="na">name=</span><span class="s">"application changed setup will work should::enable DB logging"</span> <span class="na">classname=</span><span class="s">"integration.ApplicationSpec"</span> <span class="na">time=</span><span class="s">"0.039"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/testcase&gt;&lt;testcase</span> <span class="na">name=</span><span class="s">"application setup should should::configured with custom keystore is enabled"</span> <span class="na">classname=</span><span class="s">"integration.ApplicationSpec"</span> <span class="na">time=</span><span class="s">"0.046"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/testcase&gt;&lt;testcase</span> <span class="na">name=</span><span class="s">"application setup should should::check reditect to products.html work"</span> <span class="na">classname=</span><span class="s">"integration.ApplicationSpec"</span> <span class="na">time=</span><span class="s">"1.469"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/testcase&gt;&lt;testcase</span> <span class="na">name=</span><span class="s">"application setup should should::configured to redirect all http request to https on heroku"</span> <span class="na">classname=</span><span class="s">"integration.ApplicationSpec"</span> <span class="na">time=</span><span class="s">"0.222"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/testcase&gt;&lt;testcase</span> <span class="na">name=</span><span class="s">"application setup should should::configured with custom truststore is enabled"</span> <span class="na">classname=</span><span class="s">"integration.ApplicationSpec"</span> <span class="na">time=</span><span class="s">"0.046"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/testcase&gt;&lt;testcase</span> <span class="na">name=</span><span class="s">"application setup should should::configured with DB logging deactivate"</span> <span class="na">classname=</span><span class="s">"integration.ApplicationSpec"</span> <span class="na">time=</span><span class="s">"0.078"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/testcase&gt;</span>
    <span class="nt">&lt;system-out&gt;&lt;/system-out&gt;</span>
    <span class="nt">&lt;system-err&gt;&lt;/system-err&gt;</span>
<span class="nt">&lt;/testsuite&gt;</span>
</pre></div>

<h2>
<a name="done" class="anchor" href="#done"><span class="octicon octicon-link"></span></a>Done</h2>

<ul>
<li>max build history is ten</li>
<li>updated to play 2.3.0</li>
<li>migrate from slick version 1 to 2</li>
<li>buildnumber generation is missing always 1 (done)</li>
<li>grouping of test suites to one build (need build number generation) (done)</li>
<li>support badge images (done) like <a href="https://unitcover.herokuapp.com/#/builds/pussinboots/unitcover/builds"><img src="https://unitcover.herokuapp.com/api/pussinboots/unitcover/badge?ts=10" alt="Unit Tests"></a>
</li>
<li>link test reports with travis build (done)</li>
<li>badge for all testsuites (done) <a href="https://unitcover.herokuapp.com/#/builds/pussinboots/unitcover/builds"><img src="http://unitcover.herokuapp.com/api/pussinboots/unitcover/testsuites/badge" alt="Unit Tests"></a>
</li>
</ul><h2>
<a name="todo" class="anchor" href="#todo"><span class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li>authorization is complete missing</li>
<li>nice and usable design (never done)</li>
<li>sbt plugin to upload the unit reports (maybe the solution with curl seems very simple)</li>
</ul><p>Transfer the todos to trello is still open</p>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<p>Todo and features are mantained with trello now <a href="https://trello.com/b/tPkEhbaY/unitcover">Trello</a></p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Simple setup by download the provided upload script from unitcover and specify the 3 needed parameters.</p>

<ul>
<li>github owner</li>
<li>github project</li>
<li>target test folder</li>
</ul><div class="highlight highlight-bash"><pre>wget -O - https://unitcover.herokuapp.com/scripts/upload.sh <span class="p">|</span> bash /dev/stdin pussinboots unitcover ./target/test-reports/
</pre></div>

<p>There is no build integration yet but with the following script you could upload your sbt and karma junit reports</p>

<div class="highlight highlight-bash"><pre><span class="c">#!/bin/bash</span>
<span class="nv">owner</span><span class="o">=</span>pussinboots
<span class="nv">project</span><span class="o">=</span>unitcover
<span class="nv">endpoint</span><span class="o">=</span>unitcover.herokuapp.com
<span class="nv">FILES</span><span class="o">=</span>./target/test-reports/*
<span class="nv">trigger</span><span class="o">=</span><span class="s2">"trigger=Travis"</span>
<span class="nv">travisBuildId</span><span class="o">=</span><span class="s2">""</span>
 <span class="k">if</span> <span class="o">[[</span> -n <span class="k">${</span><span class="nv">TRAVIS</span><span class="k">}</span> <span class="o">]]</span>
    <span class="k">then</span>
        <span class="nb">echo</span> <span class="s2">"travis build detected"</span>
        <span class="nv">travisBuildId</span><span class="o">=</span><span class="s2">"&amp;travisBuildId=$TRAVIS_BUILD_ID"</span>
    <span class="k">else</span>
        <span class="nv">trigger</span><span class="o">=</span><span class="s2">"trigger=Local"</span>
    <span class="k">fi</span>
<span class="c">#create new build and fetch the build number</span>
<span class="nv">buildnumber</span><span class="o">=</span><span class="k">$(</span>curl -s -X POST http://<span class="nv">$endpoint</span>/api/<span class="nv">$owner</span>/<span class="nv">$project</span>/builds?<span class="nv">$trigger$travisBuildId</span> <span class="p">|</span> sed -E <span class="s1">'s/.*"buildNumber":([0-9]*).*/\1/'</span><span class="k">)</span>
<span class="nb">echo</span> <span class="nv">$buildnumber</span>
<span class="nb">echo</span> <span class="s2">"http://$endpoint/api/$owner/$project/$buildnumber"</span>
<span class="k">for</span> f in <span class="nv">$FILES</span>
<span class="k">do</span>
  <span class="nb">echo</span> <span class="s2">"Processing $f file..."</span>
  <span class="c">#upload play junit reports</span>
  curl -H <span class="s2">"Content-Type:application/xml"</span> -X POST -d @<span class="nv">$f</span> http://<span class="nv">$endpoint</span>/api/<span class="nv">$owner</span>/<span class="nv">$project</span>/<span class="nv">$buildnumber</span>
<span class="k">done</span>
<span class="c">#upload karma unit report</span>
curl -H <span class="s2">"Content-Type:application/xml"</span> -X POST -d @test-results.xml http://<span class="nv">$endpoint</span>/api/<span class="nv">$owner</span>/<span class="nv">$project</span>/<span class="nv">$buildnumber</span>

curl -X POST http://<span class="nv">$endpoint</span>/api/<span class="nv">$owner</span>/<span class="nv">$project</span>/builds/<span class="nv">$buildnumber</span>/end
</pre></div>

<h2>
<a name="build" class="anchor" href="#build"><span class="octicon octicon-link"></span></a>Build</h2>

<pre><code>git clone https://github.com/pussinboots/unitcover.git
cd unitcover
npm install
</code></pre>

<h3>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements</h3>

<ul>
<li>play 2.3.0</li>
<li>nodejs</li>
</ul><h3>
<a name="local-server" class="anchor" href="#local-server"><span class="octicon octicon-link"></span></a>Local Server</h3>

<pre><code>sbt -Dconfig.file=conf/application-e2e.conf run
</code></pre>

<p>Than the <a href="http://localhost:9000/#/builds/">server</a> should be accessible with some dummy data. It use an h2 in memory database.</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>